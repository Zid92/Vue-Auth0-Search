{"remainingRequest":"C:\\Users\\Ivan\\Desktop\\vueApp\\my-project\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Ivan\\Desktop\\vueApp\\my-project\\src\\auth.js","dependencies":[{"path":"C:\\Users\\Ivan\\Desktop\\vueApp\\my-project\\src\\auth.js","mtime":1522154065965},{"path":"C:\\Users\\Ivan\\Desktop\\vueApp\\my-project\\.babelrc","mtime":1522150312017},{"path":"C:\\Users\\Ivan\\Desktop\\vueApp\\my-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"C:\\Users\\Ivan\\Desktop\\vueApp\\my-project\\node_modules\\babel-loader\\lib\\index.js","mtime":1519636541000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.promise\";\nimport auth0 from 'auth0-js';\nimport Vue from 'vue'; // exchange the object with your own from the setup step above.\n\nvar webAuth = new auth0.WebAuth({\n  domain: 'vuetest92.eu.auth0.com',\n  clientID: 'Vj4LQsxo22Lx6bxU7pT7ubUfhEQrFy46',\n  // make sure this line is contains the port: 8080\n  redirectUri: 'http://localhost:8080/callback',\n  // we will use the api/v2/ to access the user information as payload\n  audience: 'https://vuetest92.eu.auth0.com/userinfo' + '/api/v2/',\n  responseType: 'token id_token',\n  scope: 'openid'\n});\nvar auth = new Vue({\n  computed: {\n    token: {\n      get: function get() {\n        return localStorage.getItem('id_token');\n      },\n      set: function set(id_token) {\n        localStorage.setItem('id_token', id_token);\n      }\n    },\n    accessToken: {\n      get: function get() {\n        return localStorage.getItem('access_token');\n      },\n      set: function set(accessToken) {\n        localStorage.setItem('access_token', accessToken);\n      }\n    },\n    expiresAt: {\n      get: function get() {\n        return localStorage.getItem('expires_at');\n      },\n      set: function set(expiresIn) {\n        var expiresAt = JSON.stringify(expiresIn * 1000 + new Date().getTime());\n        localStorage.setItem('expires_at', expiresAt);\n      }\n    },\n    user: {\n      get: function get() {\n        return JSON.parse(localStorage.getItem('user'));\n      },\n      set: function set(user) {\n        localStorage.setItem('user', JSON.stringify(user));\n      }\n    }\n  },\n  methods: {\n    login: function login() {\n      webAuth.authorize();\n    },\n    logout: function logout() {\n      return new Promise(function (resolve, reject) {\n        localStorage.removeItem('access_token');\n        localStorage.removeItem('id_token');\n        localStorage.removeItem('expires_at');\n        localStorage.removeItem('user');\n        webAuth.authorize();\n      });\n    },\n    isAuthenticated: function isAuthenticated() {\n      return new Date().getTime() < this.expiresAt;\n    },\n    handleAuthentication: function handleAuthentication() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        webAuth.parseHash(function (err, authResult) {\n          if (authResult && authResult.accessToken && authResult.idToken) {\n            _this.expiresAt = authResult.expiresIn;\n            _this.accessToken = authResult.accessToken;\n            _this.token = authResult.idToken;\n            _this.user = authResult.idTokenPayload;\n            resolve();\n          } else if (err) {\n            _this.logout();\n\n            reject(err);\n          }\n        });\n      });\n    }\n  }\n});\nexport default {\n  install: function install(Vue) {\n    Vue.prototype.$auth = auth;\n  }\n};",{"version":3,"sources":["src\\auth.js"],"names":["auth0","Vue","webAuth","WebAuth","domain","clientID","redirectUri","audience","responseType","scope","auth","computed","token","get","localStorage","getItem","set","id_token","setItem","accessToken","expiresAt","expiresIn","JSON","stringify","Date","getTime","user","parse","methods","login","authorize","logout","Promise","resolve","reject","removeItem","isAuthenticated","handleAuthentication","parseHash","err","authResult","idToken","idTokenPayload","install","prototype","$auth"],"mappings":"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","sourceRoot":"C:\\Users\\Ivan\\Desktop\\vueApp\\my-project","sourcesContent":["import auth0 from 'auth0-js'\r\nimport Vue from 'vue'\r\n\r\n// exchange the object with your own from the setup step above.\r\nlet webAuth = new auth0.WebAuth({\r\n  domain: 'vuetest92.eu.auth0.com',\r\n   clientID: 'Vj4LQsxo22Lx6bxU7pT7ubUfhEQrFy46',\r\n  // make sure this line is contains the port: 8080\r\n   redirectUri: 'http://localhost:8080/callback',\r\n  // we will use the api/v2/ to access the user information as payload\r\n  audience: 'https://vuetest92.eu.auth0.com/userinfo' + '/api/v2/',\r\n  responseType: 'token id_token',\r\n  scope: 'openid'\r\n})\r\n\r\nlet auth = new Vue({\r\n  computed: {\r\n    token: {\r\n      get: function() {\r\n        return localStorage.getItem('id_token')\r\n      },\r\n      set: function(id_token) {\r\n        localStorage.setItem('id_token', id_token)\r\n      }\r\n    },\r\n    accessToken: {\r\n      get: function() {\r\n        return localStorage.getItem('access_token')\r\n      },\r\n      set: function(accessToken) {\r\n        localStorage.setItem('access_token', accessToken)\r\n      }\r\n    },\r\n    expiresAt: {\r\n      get: function() {\r\n        return localStorage.getItem('expires_at')\r\n      },\r\n      set: function(expiresIn) {\r\n        let expiresAt = JSON.stringify(expiresIn * 1000 + new Date().getTime())\r\n        localStorage.setItem('expires_at', expiresAt)\r\n      }\r\n    },\r\n    user: {\r\n      get: function() {\r\n        return JSON.parse(localStorage.getItem('user'))\r\n      },\r\n      set: function(user) {\r\n        localStorage.setItem('user', JSON.stringify(user))\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    login() {\r\n      webAuth.authorize()\r\n    },\r\n    logout() {\r\n      return new Promise((resolve, reject) => { \r\n        localStorage.removeItem('access_token')\r\n        localStorage.removeItem('id_token')\r\n        localStorage.removeItem('expires_at')\r\n        localStorage.removeItem('user')\r\n        webAuth.authorize()\r\n      })\r\n    },\r\n    isAuthenticated() {\r\n      return new Date().getTime() < this.expiresAt\r\n    },\r\n    handleAuthentication() {\r\n      return new Promise((resolve, reject) => {  \r\n        webAuth.parseHash((err, authResult) => {\r\n\r\n          if (authResult && authResult.accessToken && authResult.idToken) {\r\n            this.expiresAt = authResult.expiresIn\r\n            this.accessToken = authResult.accessToken\r\n            this.token = authResult.idToken\r\n            this.user = authResult.idTokenPayload\r\n            resolve()\r\n\r\n          } else if (err) {\r\n            this.logout()\r\n            reject(err)\r\n          }\r\n\r\n        })\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\nexport default {\r\n  install: function(Vue) {\r\n    Vue.prototype.$auth = auth\r\n  }\r\n}"]}]}